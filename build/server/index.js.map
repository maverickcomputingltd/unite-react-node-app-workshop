{"version":3,"sources":["../../src/server/index.js"],"names":["dotenv","config","process","env","SHOPIFY_SECRET","SHOPIFY_API_KEY","app","Koa","use","keys","apiKey","secret","scopes","afterAuth","ctx","session","shop","accessToken","console","log","redirect","index","body"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAIAA,iBAAOC,MAAP;mBAC4CC,QAAQC,G;IAA5CC,c,gBAAAA,c;IAAgBC,e,gBAAAA,e;;;AAExB,IAAMC,MAAM,IAAIC,aAAJ,EAAZ;;AAEAD,IAAIE,GAAJ,CAAQ,0BAAQF,GAAR,CAAR;;AAEAA,IAAIG,IAAJ,GAAW,CAACL,cAAD,CAAX;;AAEAE,IAAIE,GAAJ,CACI,8BAAkB;AACd;AACAE,YAAQL,eAFM;AAGd;AACAM,YAAQP,cAJM;AAKd;AACA;AACAQ,YAAQ,CAAC,gBAAD,CAPM;AAQd;AACAC,aATc,qBASJC,GATI,EASC;AAAA,2BACmBA,IAAIC,OADvB;AAAA,YACHC,IADG,gBACHA,IADG;AAAA,YACGC,WADH,gBACGA,WADH;;;AAGXC,gBAAQC,GAAR,CAAY,YAAZ,EAA0BH,IAA1B,EAAgCC,WAAhC;;AAEAH,YAAIM,QAAJ,CAAa,GAAb;AACH;AAfa,CAAlB,CADJ;;AAoBA;AACAd,IAAIE,GAAJ,CAAQ,0CAAR;;AAEAF,IAAIE,GAAJ,CAAQ,SAASa,KAAT,CAAeP,GAAf,EAAoB;AACxBI,YAAQC,GAAR,CAAY,oCAAZ;AACAL,QAAIQ,IAAJ,GAAW,iCAAX;AACH,CAHD;;kBAKehB,G","file":"index.js","sourcesContent":["import dotenv from 'dotenv';\nimport Koa from 'koa';\nimport session from 'koa-session';\nimport createShopifyAuth, {\n    createVerifyRequest,\n} from '@shopify/koa-shopify-auth';\n\ndotenv.config();\nconst { SHOPIFY_SECRET, SHOPIFY_API_KEY } = process.env;\n\nconst app = new Koa();\n\napp.use(session(app));\n\napp.keys = [SHOPIFY_SECRET];\n\napp.use(\n    createShopifyAuth({\n        // your shopify app's api key\n        apiKey: SHOPIFY_API_KEY,\n        // your shopify app's api secret\n        secret: SHOPIFY_SECRET,\n        // our app's permissions\n        // we need to write products to the user's store\n        scopes: ['write_products'],\n        // our own custom logic after authentication has completed\n        afterAuth(ctx) {\n            const { shop, accessToken } = ctx.session;\n\n            console.log('We did it!', shop, accessToken);\n\n            ctx.redirect('/');\n        },\n    }),\n);\n\n// secure all middleware after this line\napp.use(createVerifyRequest());\n\napp.use(function index(ctx) {\n    console.log('Hello Unite updated aouthd!!!!! ðŸ‘‹')\n    ctx.body = 'Hello Unite updated aouthd!! ðŸ‘‹';\n});\n\nexport default app;"]}